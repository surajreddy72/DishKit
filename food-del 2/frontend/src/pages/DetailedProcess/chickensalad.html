<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Best Chicken Salad Recipe</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 20px;
    }
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th, td {
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
    .button {
      padding: 10px 20px;
      background-color: #2196F3;
      color: white;
      border: none;
      cursor: pointer;
    }
    .button:hover {
      background-color: #1976D2;
    }
    .nutrients-info {
      margin-top: 20px;
      padding: 20px;
      background-color: #f2f2f2;
      border-radius: 5px;
    }
    .chart-container {
      margin-top: 20px;
    }
    .video-container {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
      overflow: hidden;
    }
    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    .ingredient-row {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    .ingredient-row input[type="text"],
    .ingredient-row input[type="number"] {
      margin-right: 10px;
      padding: 5px;
    }
    .ingredient-row button {
      padding: 5px 10px;
      background-color: #f44336;
      color: white;
      border: none;
      cursor: pointer;
    }
    .add-ingredient {
      padding: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
      margin-bottom: 20px;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">
  <div class="max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
    <h1 class="text-4xl font-bold text-gray-800 mb-8">The Best Chicken Salad Recipe</h1>
    
    <div class="mb-8">
      <p class="text-lg text-gray-700 mb-4">
        This is the ultimate chicken salad recipe! We call this 'fancy' Chicken Salad because of the dressing, grapes, and pecans, but it's truly easy. This is a fresher and lightened-up version of classic chicken salad, perfect for meal prep.
      </p>
      <p class="text-lg text-gray-700">
        This is the perfect side dish or main course. It's especially easy if you use leftover rotisserie chicken. Watch the <strong>video tutorial</strong> and see how simple it is.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <div>
        <h2 class="text-3xl font-bold text-gray-800 mb-6">Ingredients</h2>
        <ul class="list-disc pl-8 mb-8 space-y-2 text-gray-700 text-lg">
          <li>Chicken - we use 2 large chicken breasts from a whole roasted chicken, but you can use rotisserie chicken, Baked Chicken Breast, or sauteed chicken breasts instead.</li>
          <li>Celery - adds a great crunch to the salad and lightens up the flavor.</li>
          <li>Grapes - add sweet juiciness to the salad.</li>
          <li>Pecans - we toasted nuts on a dry skillet to give them even more flavor.</li>
          <li>Red onion - finely chop half of a medium red onion, or add red onion to taste.</li>
        </ul>

        <h2 class="text-3xl font-bold text-gray-800 mb-6">The Best Chicken Salad Dressing</h2>
        <ul class="list-disc pl-8 mb-8 space-y-2 text-gray-700 text-lg">
          <li>Mayonnaise - use real mayo for the best flavor.</li>
          <li>Sour cream - full-fat, or substitute with low-fat sour cream or fat-free Greek yogurt.</li>
          <li>Lemon juice - be sure to use freshly squeezed and not from concentrate.</li>
          <li>Dill - finely chopped fresh dill is preferred, but you can substitute with 2 Tbsp of finely chopped fresh parsley.</li>
          <li>Salt and Pepper - to taste.</li>
        </ul>
      </div>

      <div>
        <h2 class="text-3xl font-bold text-gray-800 mb-6">How to Make Chicken Salad</h2>
        <ol class="list-decimal pl-8 mb-8 space-y-4 text-gray-700 text-lg">
          <li>
            <strong>Toast pecans</strong> - place on a dry skillet over medium/low heat and toss frequently until pecans are golden and fragrant. Transfer to a cutting board to coarsely chop and set aside to cool, then add to a large bowl.
          </li>
          <li>
            <strong>Chop Chicken</strong> - dice cold chicken breast and add it to the mixing bowl. Note: Diced chicken has a different texture than shredded.
          </li>
          <li>
            <strong>Halve Grapes</strong> - cut grapes in half with a serrated knife and add to the bowl.
          </li>
          <li>
            <strong>Chop celery and onion</strong> - trim off ends, finely chop, then add to the bowl.
          </li>
          <li>
            <strong>Make Dressing</strong> - combine the dressing ingredients and add to the salad.
          </li>
          <li>
            <strong>Toss to combine</strong> - stir until salad is evenly coated in dressing, then refrigerate until ready to serve.
          </li>
        </ol>
      </div>
    </div>

    <div>
      <h2 class="text-3xl font-bold text-gray-800 mb-6">Ingredient Table</h2>
      <div class="mb-4">
        <label for="servingSize" class="mr-2">Number of People:</label>
        <input type="number" id="servingSize" name="servingSize" min="1" value="1" onchange="updateIngredientQuantities()">
      </div>
      <table>
        <thead>
          <tr>
            <th>Ingredient</th>
            <th>Quantity (in grams)</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="ingredientList">
          <tr class="ingredient-row">
            <td><input type="text" value="Chicken breast"></td>
            <td><input type="number" value="150" min="0"></td>
            <td><button onclick="removeIngredient(this)">Remove</button></td>
          </tr>
          <tr class="ingredient-row">
            <td><input type="text" value="Celery"></td>
            <td><input type="number" value="30" min="0"></td>
            <td><button onclick="removeIngredient(this)">Remove</button></td>
          </tr>
          <tr class="ingredient-row">
            <td><input type="text" value="Grapes"></td>
            <td><input type="number" value="50" min="0"></td>
            <td><button onclick="removeIngredient(this)">Remove</button></td>
          </tr>
          <tr class="ingredient-row">
            <td><input type="text" value="Pecans"></td>
            <td><input type="number" value="20" min="0"></td>
            <td><button onclick="removeIngredient(this)">Remove</button></td>
          </tr>
          <tr class="ingredient-row">
            <td><input type="text" value="Red onion"></td>
            <td><input type="number" value="10" min="0"></td>
            <td><button onclick="removeIngredient(this)">Remove</button></td>
          </tr>
          <tr class="ingredient-row">
            <td><input type="text" value="Mayonnaise"></td>
            <td><input type="number" value="30" min="0"></td>
            <td><button onclick="removeIngredient(this)">Remove</button></td>
          </tr>
          <tr class="ingredient-row">
            <td><input type="text" value="Sour cream"></td>
            <td><input type="number" value="15" min="0"></td>
            <td><button onclick="removeIngredient(this)">Remove</button></td>
          </tr>
          <tr class="ingredient-row">
            <td><input type="text" value="Lemon juice"></td>
            <td><input type="number" value="5" min="0"></td>
            <td><button onclick="removeIngredient(this)">Remove</button></td>
          </tr>
          <tr class="ingredient-row">
            <td><input type="text" value="Fresh dill"></td>
            <td><input type="number" value="2" min="0"></td>
            <td><button onclick="removeIngredient(this)">Remove</button></td>
          </tr>
          <tr class="ingredient-row">
            <td><input type="text" value="Salt"></td>
            <td><input type="text" value="To taste"></td>
            <td><button onclick="removeIngredient(this)">Remove</button></td>
          </tr>
          <tr class="ingredient-row">
            <td><input type="text" value="Black pepper"></td>
            <td><input type="text" value="To taste"></td>
            <td><button onclick="removeIngredient(this)">Remove</button></td>
          </tr>
        </tbody>
      </table>
      <button class="add-ingredient" onclick="addIngredient()">Add Ingredient</button>
      <button class="button" onclick="calculateNutrients()">Calculate Nutrients</button>
    </div>

    <div class="nutrients-info" id="nutrientsText"></div>
    <div class="chart-container">
      <canvas id="nutrientPieChart"></canvas>
    </div>

    <div class="video-container mt-12">
      <h2 class="text-3xl font-bold text-gray-800 mb-6">Video Tutorial</h2>
      <iframe src="https://www.youtube.com/embed/voHVFxMnMDw" frameborder="0" allowfullscreen></iframe>
    </div>
  </div>

  <script>
  let nutrientPieChart = null;

  function addIngredient() {
    const ingredientList = document.getElementById('ingredientList');
    const newRow = document.createElement('tr');
    newRow.classList.add('ingredient-row');
    newRow.innerHTML = `
      <td><input type="text"></td>
      <td><input type="number" min="0"></td>
      <td><button onclick="removeIngredient(this)">Remove</button></td>
    `;
    ingredientList.appendChild(newRow);
  }

  function removeIngredient(button) {
    const row = button.parentNode.parentNode;
    row.parentNode.removeChild(row);
  }

  function updateIngredientQuantities() {
    const servingSize = parseInt(document.getElementById('servingSize').value);
    const ingredientRows = document.querySelectorAll('.ingredient-row');

    ingredientRows.forEach(row => {
      const quantityInput = row.querySelector('input[type="number"]');
      if (quantityInput) {
        const initialQuantity = parseFloat(
          quantityInput.getAttribute('data-initial-quantity') || quantityInput.value
        );
        const updatedQuantity = initialQuantity * servingSize;
        quantityInput.value = updatedQuantity.toFixed(2);
      }
    });
  }

  function calculateNutrients() {
    console.log("calculateNutrients called"); // Debugging output
    const ctx = document.getElementById("nutrientPieChart").getContext("2d");
    
    if (!ctx) {
      console.error("Canvas for pie chart not found or context is null");
      return;
    }

    const ingredientRows = document.querySelectorAll('.ingredient-row');
    const nutrientsText = document.getElementById('nutrientsText');
    if (!nutrientsText) {
      console.error("Nutrient information output element not found");
      return;
    }

    const nutrientData = {
      'chicken breast': { protein: 31, carbs: 0, fat: 3.6 },
      'celery': { protein: 0.7, carbs: 3, fat: 0.2 },
      'grapes': { protein: 0.6, carbs: 18, fat: 0.3 },
      'pecans': { protein: 9.2, carbs: 3.9, fat: 71.9 },
      'red onion': { protein: 1.1, carbs: 9.3, fat: 0.1 },
      'mayonnaise': { protein: 0.1, carbs: 0.6, fat: 10.3 },
      'sour cream': { protein: 1.4, carbs: 2.1, fat: 19.4 },
      'lemon juice': { protein: 0.4, carbs: 6.9, fat: 0.2 },
      'dill': { protein: 3.5, carbs: 7, fat: 1.1 },
    };

    let totalProtein = 0;
    let totalCarbs = 0;
    let totalFat = 0;

    ingredientRows.forEach(row => {
      const ingredientInput = row.querySelector('input[type="text"]');
      const quantityInput = row.querySelector('input[type="number"]');
      
      if (!ingredientInput || !quantityInput) {
        console.error("Ingredient or quantity input is null in row:", row);
        return;
      }

      const ingredient = ingredientInput.value.toLowerCase();
      const quantity = parseFloat(quantityInput.value);

      if (nutrientData[ingredient]) {
        const nutrients = nutrientData[ingredient];
        const servingSize = quantity / 100;

        totalProtein += nutrients.protein * servingSize;
        totalCarbs += nutrients.carbs * servingSize;
        totalFat += nutrients.fat * servingSize;
      }
    });

    nutrientsText.innerText = `Protein: ${totalProtein.toFixed(2)}g, Carbs: ${totalCarbs.toFixed(2)}g, Fat: ${totalFat.toFixed(2)}g`;

    const chartData = {
      labels: ["Protein", "Carbohydrates", "Fats"],
      datasets: [
        {
          data: [totalProtein, totalCarbs, totalFat],
          backgroundColor: ["#4CAF50", "#FFC107", "#FF5722"],
        },
      ],
    };

    if (nutrientPieChart) {
      nutrientPieChart.data = chartData;
      nutrientPieChart.update();
    } else {
      nutrientPieChart = new Chart(ctx, {
        type: "pie",
        data: chartData,
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: "right",
            },
          },
        },
      });
    }
  }
</script>


</body>
</html>
